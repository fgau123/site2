<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<title>Публичный Firebase чат</title>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js"></script>
<style>
body { font-family: Arial, sans-serif; margin: 20px; }
#messages { height:300px; overflow-y:auto; border:1px solid #ccc; padding:10px; background:#fff; }
</style>
</head>
<body>
<h2>Публичный Firebase чат</h2>
<div id="messages"></div>
<input type="text" id="messageInput" placeholder="Введите сообщение" />
<button id="sendBtn">Отправить</button>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyCs7LeVlj_CXxLmjBbFiEYUBEHrrzoJLgA",
  authDomain: "site-89609.firebaseapp.com",
  projectId: "site-89609",
  storageBucket: "site-89609.firebasestorage.app",
  messagingSenderId: "885214205765",
  appId: "1:885214205765:web:f29f87b03a0dae2414102c",
  measurementId: "G-WDVTSPHTGB"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

const messagesDiv = document.getElementById('messages');
const input = document.getElementById('messageInput');
const btn = document.getElementById('sendBtn');

// Прослушка новых сообщений
db.collection("messages").orderBy("timestamp")
  .onSnapshot(snapshot => {
    messagesDiv.innerHTML = '';
    snapshot.forEach(doc => {
      const msg = doc.data();
      const div = document.createElement('div');
      const time = new Date(msg.timestamp.seconds * 1000).toLocaleTimeString();
      div.innerHTML = `<strong>[${time}]</strong> ${msg.text}`;
      messagesDiv.appendChild(div);
    });
  });

// Отправка сообщений
btn.onclick = () => {
  const text = input.value.trim();
  if (text) {
    db.collection("messages").add({
      text: text,
      timestamp: firebase.firestore.FieldValue.serverTimestamp()
    });
    input.value = '';
  }
};
</script>
</body>
</html>